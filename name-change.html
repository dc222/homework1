<html>
    <head>
        <title>Draw Name</title>
    </head>
        <body>
            <p>
                选择文件:<input type="file" id="file" >
            </p>
            <p>
                <input type="submit" id="button1"  value="确定" onclick="readfile()">
            </p>
            <p>
                <input type="submit" id="button2"  value="绘制" onclick="draw_name(canvas)">
                <input type="submit" id="button2"  value="左斜变换" onclick="left_inclined(canvas)">
                <input type="submit" id="button2"  value="耸肩变换" onclick="top_inclined(canvas)">
                <input type="submit" id="button2"  value="比例变换" onclick="scale(canvas)">
                <input type="submit" id="button2"  value="旋转变换" onclick="rotation(canvas)">
                <input type="submit" id="button2"  value="对称变换" onclick="symmetry(canvas)">
                <input type="submit" id="button2"  value="平移变换" onclick="translation(canvas)">
            
            </p>
            <div id="tt">
                    </div>
            <!--绘制区域-->
            <table width="1500" height="1000" border="1">
              <tr>
                <th scope="col"><canvas name=canvas></canvas></th>
              </tr>
            </table>
        </body>
            <script>
                var MAXAMOUNT=100;
                var canvas=document.getElementsByName("canvas")[0];
                var x=new Array();
                var y=new Array();
                for(var i=0;i<MAXAMOUNT;i++)
                {
                    x[i]=0;
                    y[i]=0;
                }
                //读取文件并存入数组
                function readfile()
                {
                    
                    var file=document.getElementById("file").files[0];
                    var reader=new FileReader();
                    reader.readAsText(file);
                    reader.onload = function (e) 
                    {
                        //以换行标志作为分隔符
                        var fileText = e.target.result.split("\n");
                        for(var i=0;i<fileText.length;i++)
                        {
                            if(fileText[i].length>3) //取出所有非END的行
                            {
                                var arr=fileText[i].split(",");//将编号、x、y分隔开
                                y[i]=arr[1];
                                x[i]=arr[2];
                            }
                            else
                            {
                                y[i]=0;
                                x[i]=0;
                            }
                        }
                    }
        
                }  
           
                //绘制
                function draw_name(canvas)
                {   
                  canvas.width = 1500;
                  canvas.height = 1000;
                  
                     for(var i=0;i<MAXAMOUNT-1;i++)
                    {
                  var ctx = canvas.getContext("2d");  
                  ctx.lineWidth =5;
                  ctx.strokeStyle ='red';
                          
                        if((x[i]!=0)&&(x[i+1]!=0))
                        {
                            ctx.beginPath();
                            ctx.moveTo(x[i]*10,y[i]*10);
                            ctx.lineTo(x[i+1]*10,y[i+1]*10);
                            ctx.stroke();
                        }
                        
                    }
                }
                function translation(canvas)
                {   
                  canvas.width = 1500;
                  canvas.height = 1000;
                  
                     for(var i=0;i<MAXAMOUNT-1;i++)
                    {
                  var ctx = canvas.getContext("2d");  
                  ctx.lineWidth =5;
                  ctx.strokeStyle ='red';
                          
                        if((x[i]!=0)&&(x[i+1]!=0))
                        {
                            ctx.beginPath();
                            ctx.moveTo(x[i]*10,y[i]*10+10);
                            ctx.lineTo(x[i+1]*10,y[i+1]*10+10);
                            ctx.stroke();
                        }
                        
                    }
                }
                function symmetry(canvas)
                {   
                  canvas.width = 1500;
                  canvas.height = 1000;
                  
                     for(var i=0;i<MAXAMOUNT-1;i++)
                    {
                  var ctx = canvas.getContext("2d");  
                  ctx.lineWidth =5;
                  ctx.strokeStyle ='red';
                          
                        if((x[i]!=0)&&(x[i+1]!=0))
                        {
                            ctx.beginPath();
                            ctx.moveTo(500-x[i]*10,y[i]*10);
                            ctx.lineTo(500-x[i+1]*10,y[i+1]*10);
                            ctx.stroke();
                        }
                        
                    }
                }
                function rotation(canvas)
                {   
                  canvas.width = 1500;
                  canvas.height = 1000;
                  
                     for(var i=0;i<MAXAMOUNT-1;i++)
                    {
                  var ctx = canvas.getContext("2d");  
                  ctx.lineWidth =5;
                  ctx.strokeStyle ='red';
                          var m=Math.cos(Math.PI/12);
                          var n=Math.sin(Math.PI/12);
                        if((x[i]!=0)&&(x[i+1]!=0))
                        {
                            ctx.beginPath();
                            ctx.moveTo(x[i]*10*m-y[i]*10*n,x[i]*10*n+y[i]*10*m);
                            ctx.lineTo(x[i+1]*10*m-y[i+1]*10*n,x[i+1]*10*n+y[i+1]*10*m);
                            ctx.stroke();
                        }
                        
                    }
                }
                function scale(canvas)
                {   
                  canvas.width = 1500;
                  canvas.height = 1000;
                  
                     for(var i=0;i<MAXAMOUNT-1;i++)
                    {
                  var ctx = canvas.getContext("2d");  
                  ctx.lineWidth =5;
                  ctx.strokeStyle ='red';
                          
                        if((x[i]!=0)&&(x[i+1]!=0))
                        {
                            ctx.beginPath();
                            ctx.moveTo(x[i]*20,y[i]*20);
                            ctx.lineTo(x[i+1]*20,y[i+1]*20);
                            ctx.stroke();
                        }
                        
                    }
                }
                function left_inclined(canvas)
                {   
                  canvas.width = 1500;
                  canvas.height = 1000;
                  
                     for(var i=0;i<MAXAMOUNT-1;i++)
                    {
                  var ctx = canvas.getContext("2d");  
                  ctx.lineWidth =5;
                  ctx.strokeStyle ='red';
                          
                        if((x[i]!=0)&&(x[i+1]!=0))
                        {
                            ctx.beginPath();
                            ctx.moveTo(x[i]*10-y[i]*0.6,y[i]*10);
                            ctx.lineTo(x[i+1]*10-y[i+1]*0.6,y[i+1]*10);
                            ctx.stroke();
                        }
                    }
                }
                function top_inclined(canvas)
                {   
                  canvas.width = 1500;
                  canvas.height = 1000;
                  
                     for(var i=0;i<MAXAMOUNT-1;i++)
                    {
                  var ctx = canvas.getContext("2d");  
                  ctx.lineWidth =5;
                  ctx.strokeStyle ='red';
                          
                        if((x[i]!=0)&&(x[i+1]!=0))
                        {
                            ctx.beginPath();
                            ctx.moveTo(x[i]*10,y[i]*10+x[i]*0.5);
                            ctx.lineTo(x[i+1]*10,y[i+1]*10+x[i+1]*0.5);
                            ctx.stroke();
                        }
                    }
                }
            </script>
    </html>
       